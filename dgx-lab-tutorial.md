## DGX System Access and Management

**Document Version:** 1.0
**Date:** October 26, 2023
**Prepared For:** Research Staff and Lab Users
**Prepared By:** [Your Name/Team Name]

**1. Introduction**

This document serves as a comprehensive blueprint for research staff and lab users to effectively access and manage the DGX computing system and associated resources within our laboratory environment. It meticulously details necessary access credentials, standardized procedures for routine tasks, and crucial guidelines for responsible system utilization. The primary objective of this document is to optimize workflows and ensure the efficient and secure operation of our high-performance computing infrastructure.

**2. System Access Credentials**

This section enumerates the essential credentials required to access various critical components of the DGX system. **Maintaining the confidentiality and security of these credentials is paramount. Refrain from sharing them through unsecured channels.**

| System Component | Detail                                                                    | Username          | Password                                  | Security Considerations                                                                                                                                                                                                |
|------------------|---------------------------------------------------------------------------|-------------------|-------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Loginserver**  | IP Address: 10.90.216.26 <br> Operating System: Linux Ubuntu (No GUI)       | `swavaf`          | `123456`                                  | This server acts as the primary entry point for accessing other resources. Employ a secure shell (SSH) client for all connections. Ensure your local machine has robust password protection.                               |
| **DGX1 Server**  | IP Address: 172.20.18.190 <br> Operating System: Linux Ubuntu (No GUI)      | `swavaf`          | `swavaf@123`                              | The primary high-performance computing resource. Secure access via SSH from the Loginserver is the recommended practice. Avoid direct external SSH access to this server.                                               |
| **MariaDB**      | Connection available exclusively from the Loginserver.                      | `dgx1_db`         | `AmGA%G8x`                                | This database stores critical system-related information. Access should be strictly limited to authorized users via command-line tools executed on the Loginserver. Exercise caution with database modification commands. |
| **BMC Access**   | IP Address: 172.0.18.192                                                 | `uaeudgx1`        | `uaeudgx1`                                | The Baseboard Management Controller (BMC) provides low-level hardware monitoring and control. Access is via a web browser (Mozilla Firefox or Internet Explorer are recommended). Limit access to trained personnel only. |

**Key Security Directives:**

*   **Credential Handling:** Treat all provided credentials as highly sensitive information. Do not store them in plain text or share them via email or other unencrypted methods.
*   **BMC Access Protocol:** Due to its privileged control over DGX hardware, BMC access should be restricted to individuals with specific responsibilities. Refer to the dedicated "BMC Guide" (location to be specified if available) for comprehensive usage guidelines.
*   **NVIDIA Support Credentials Management:** Credentials utilized for engaging with NVIDIA Enterprise Support are securely managed by Prof. Moyo. Direct all NVIDIA support-related inquiries through Prof. Moyo to ensure proper authentication and tracking.

**3. Scheduling System Overview**

This section provides essential details regarding the job scheduling system implemented on the DGX infrastructure.

| Attribute             | Value                              | Contextual Information                                                                                                                                                              |
|-----------------------|------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Hosting Environment** | `/var/www/dgx` (on the Loginserver) | This directory on the Loginserver likely houses web-based interfaces or configuration files associated with the scheduling system. Access may require specific permissions.       |
| **System Architecture** | Explanation available on IEEE Xplore | For a detailed understanding of the scheduling system's design, functionalities, and underlying principles, please refer to the relevant publications indexed on IEEE Xplore. |
| **Source Code Repository** | Code accessible via GitHub        | The complete source code for the scheduling system is maintained on a GitHub repository (provide the specific repository URL here if applicable). Access may require GitHub account authentication. |

**4. Email Communication for System Requests**

This section outlines the designated email channel for submitting and managing system-related requests.

| Attribute         | Value                      | Operational Procedure                                                                                                                                                                                                                                                                                         |
|-------------------|----------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Designated Email Address** | `swavaf3693@gmail.com`    | All system-related requests, including access requests, software installation inquiries, and issue reports, should be directed to this dedicated email address.                                                                                                                                   |
| **Associated Password**    | `jlwtaskgmjfckqgi`        | This password is the application-specific credential for the designated email account. It should be used only when explicitly required for email client configuration or programmatic access (if applicable). Do not use this password for other systems.                                          |
| **Request Handling Protocol** | Requests processed via email | Upon receipt, system administrators will review and address your requests based on their priority and available resources. Please ensure your emails are clear, concise, and provide sufficient detail to facilitate efficient processing. Include relevant logs or error messages when reporting issues. |

**5. Standardized Scripts (Loginserver)**

The following table details pre-configured scripts located on the Loginserver designed to streamline common administrative tasks.

| Script Name                      | Location                                  | Command Syntax                                              | Functionality                                                              | Operational Notes                                                                                                                                                                                              |
|----------------------------------|-------------------------------------------|-------------------------------------------------------------|--------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Create New User Account**      | `/var/www/create_user_loginserver.sh`      | `sudo ./create_user_loginserver.sh <new_username>`           | Creates a new user account on the Loginserver operating system.          | Replace `<new_username>` with the desired username for the new account. The script will prompt for the new user's password. Execution requires `sudo` privileges; ensure you have the necessary authorization. |
| **Generate Machine Usage Reports** | `loginserver/opt/dgx/load_report.php`       | `php loginserver/opt/dgx/load_report.php --year <YYYY> --month <MM>` | Generates comprehensive reports detailing the utilization of the DGX machine for a specified year and month. | Ensure the PHP command-line interpreter is available on the Loginserver. Replace `<YYYY>` with the four-digit year and `<MM>` with the two-digit month (e.g., 2023, 10). The generated report will typically be output to the console or a designated file. |

**6. System Support Channels**

This section provides the designated points of contact for various levels of system support.

| Support Level          | Contact Information              | Scope of Support                                                                                                                                                                                                                            |
|------------------------|----------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Local System Support** | Prof. Moyo                       | Initial point of contact for general system inquiries, local configuration issues, access-related problems, and guidance on standard operating procedures. Prof. Moyo will also coordinate with NVIDIA support when necessary.           |
| **NVIDIA Enterprise Support** | `enterprisesupport@nvidia.com` | For complex hardware or software issues directly pertaining to the DGX system that cannot be resolved through local support. Provide detailed problem descriptions, relevant logs, and steps to reproduce the issue for efficient resolution. |
| **NVIDIA Support Credentials** | Managed by Prof. Moyo          | The necessary credentials for authenticating support requests with NVIDIA are securely held by Prof. Moyo. Please direct all communication requiring these credentials through Prof. Moyo. Do not attempt to obtain these credentials directly. |

**7. MariaDB Database Management (On Loginserver)**

This section outlines standardized procedures for interacting with the MariaDB database hosted on the Loginserver. **Exercise extreme caution when executing database commands, as incorrect modifications can lead to data loss or system instability.**

**7.1. Procedure for Deleting a User and Associated Data**

The following table details the step-by-step process for completely removing a user and all their associated records from the database.

| Step | Action                                  | SQL Command / Instruction                                                              | Important Considerations                                                                                                                                                                                                                                     |
|------|-----------------------------------------|--------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1    | Establish Database Connection           | `mysql -u dgx1_db -p`                                                                | Execute this command on the Loginserver. You will be prompted to enter the MariaDB password (`AmGA%G8x`). Ensure you have network connectivity to the database server.                                                                                         |
| 2    | Select the Target Database              | `USE dgx1_db;`                                                                         | This command ensures that all subsequent database operations are performed within the `dgx1_db` database. Verify that the command executes successfully before proceeding.                                                                                   |
| 3.a  | Delete Task Resource Associations       | `DELETE FROM task_resources WHERE task_ID IN (SELECT task_ID FROM tasks WHERE user_ID = '<user_identifier>');` | This command identifies and removes all entries in the `task_resources` table that are linked to tasks owned by the user with the specified `<user_identifier>`. **Replace `<user_identifier>` with the actual user ID to be deleted.** |
| 3.b  | Delete Associated Email Records         | `DELETE FROM emails WHERE task_ID IN (SELECT task_ID FROM tasks WHERE user_ID = '<user_identifier>');`    | This command identifies and removes all email records associated with tasks belonging to the user with the specified `<user_identifier>`. **Replace `<user_identifier>` with the actual user ID to be deleted.**                          |
| 3.c  | Delete User's Tasks                     | `DELETE FROM tasks WHERE user_ID = '<user_identifier>';`                                              | This command removes all task records directly assigned to the user with the specified `<user_identifier>`. **Replace `<user_identifier>` with the actual user ID to be deleted.**                                                              |
| 4    | Delete User Record from Users Table     | `DELETE FROM users WHERE user_ID = '<user_identifier>';`                                              | This command removes the primary user record from the `users` table for the specified `<user_identifier>`. **Replace `<user_identifier>` with the actual user ID to be deleted.**                                                              |
| 5.a  | Verify User Deletion from Users Table | `SELECT * FROM users WHERE user_ID = '<user_identifier>';`                                              | After executing step 4, this command should return an empty result set, confirming the successful removal of the user record. **Replace `<user_identifier>` with the actual user ID that was deleted.**                                |
| 5.b  | Verify Deletion of Related Records     | ```sql <br> SELECT * FROM tasks WHERE user_ID = '<user_identifier>'; <br> SELECT * FROM emails WHERE task_ID IN (SELECT task_ID FROM tasks WHERE user_ID = '<user_identifier>'); <br> SELECT * FROM task_resources WHERE task_ID IN (SELECT task_ID FROM tasks WHERE user_ID = '<user_identifier>'); <br> ``` | These subsequent `SELECT` queries are crucial for confirming that no orphaned records related to the deleted user remain in the `tasks`, `emails`, and `task_resources` tables. An empty result set for each query indicates successful removal. **Replace `<user_identifier>` in each query with the actual user ID that was deleted.** |
| 6    | Commit Database Changes               | `COMMIT;`                                                                            | Execute this command *only if* the MariaDB database is configured to use transactional integrity and autocommit is disabled. This action permanently saves all the preceding `DELETE` operations. If autocommit is enabled, changes are typically applied immediately. |
| 7    | Perform Database Integrity Checks     | Review foreign key constraints and utilize database integrity tools.                     | After deleting data, it is essential to perform thorough database integrity checks to ensure that no referential integrity violations or data inconsistencies have occurred. This may involve using specific database commands or dedicated tools.          |

**Important:** Always replace `<user_identifier>` with the precise `user_ID` of the user you intend to delete. Incorrectly specifying the `user_ID` can lead to the unintentional deletion of other users' data.

**7.2. Procedure for Creating a User on the Loginserver (Using Provided Script)**

The following table outlines the steps to create a new user account on the Loginserver utilizing the designated script.

| Step | Action                      | Command/Details                                                    | Operational Notes                                                                                                                                                                                                                                                                          |
|------|-----------------------------|--------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1    | Navigate to Script Directory | `cd /opt/dgx/`                                                     | Ensure your current working directory in the terminal is `/opt/dgx/` before executing the script.                                                                                                                                                                                              |
| 2    | Execute User Creation Script | `sudo ./create_user_loginserver.sh <new_username>`                 | Execute the script with `sudo` privileges as it requires root permissions to create new user accounts. Replace `<new_username>` with the desired username for the new user account.                                                                                                          |
| 3    | Provide User Password         | Follow the prompts displayed by the script to enter and confirm the password for the newly created user account. | Choose a strong and unique password that adheres to security best practices. The script will typically handle the password setting process securely.                                                                                             |
| 4    | Verify User Creation        | Observe the script's output for a confirmation message similar to: `Creating new sample user: <provided_username>` | Review the terminal output to confirm that the script has successfully initiated the user creation process without any errors. If errors occur, note them down and consult with system administrators.                                                 |

**8. Email Configuration Parameters**

This table details the configuration parameters governing the system's email functionality. This information is primarily for diagnostic purposes and system administration. The configuration file is located at `/var/www/dgx/config.php`.

| Section                 | Key             | Value                            | Description                                                                                                                                                                  |
|-------------------------|-----------------|----------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Email Configuration** | `EMAIL_ACCOUNT` | `swavaf3693@gmail.com`          | The primary Gmail account utilized by the system for sending automated emails and notifications.                                                                            |
|                         | `EMAIL_PASSWORD`| `jlwtaskgmjfckqgi`              | The application-specific password generated for the `EMAIL_ACCOUNT`. This password should only be used for email functionality within the system.                               |
|                         | `EMAIL_SERVER`  | `smtp.gmail.com`                 | The Simple Mail Transfer Protocol (SMTP) server address for Gmail, which is currently configured as the primary outgoing mail server.                                         |
|                         |                 | `smtp.office365.com` (commented out) | An alternative SMTP server address for Microsoft Office 365, currently commented out and not in active use.                                                              |
|                         |                 | `smtpi.uaeu.ac.ae` (commented out)    | An alternative SMTP server address for the United Arab Emirates University (UAEU), currently commented out and not in active use.                                        |
| **SSH Configuration**   | `REMOTE_SSH_USER` | `runner`                         | The default username configured for establishing remote SSH connections from the Loginserver to other systems (likely the DGX1 server).                                   |
|                         | `REMOTE_SSH_HOST` | `dgx`                            | The hostname or IP address alias configured for the remote SSH connection target (likely resolves to the DGX1 server's internal IP address).                                  |
| **Database Configuration** | `DB_HOST`       | `127.0.0.1`                      | The hostname or IP address of the MariaDB database server. `127.0.0.1` indicates that the database is running locally on the same server where the configuration file is located (Loginserver). |
|                         | `DB_NAME`       | `dgx1_db`                        | The name of the specific MariaDB database utilized by the system.                                                                                                            |
|                         | `DB_USER`       | `dgx1_db`                        | The username used to authenticate and access the `dgx1_db` MariaDB database.                                                                                                 |
|                         | `DB_PASSWORD`   | `AmGA%G8x`                       | The password associated with the `DB_USER` for authenticating access to the `dgx1_db` MariaDB database.                                                                       |

**9. Monitoring and Managing DGX Server Docker Containers**

This section provides essential commands for inspecting and managing Docker containers running on the DGX server.

| Step | Action                                       | Command                                                                        | Purpose                                                                                                                                                                                                                                                               |
|------|----------------------------------------------|--------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1    | List All Docker Containers                   | `sudo docker ps -a`                                                            | This command displays a comprehensive list of all Docker containers present on the DGX server, including those that are currently running, stopped, exited, or in other states. It provides essential information such as container ID, image, command, and status. |
| 2    | Filter for Exited Task-Specific Containers | `sudo docker ps -a --filter "status=exited" --filter "name=Task_"` --format "{{.ID}} {{.Names}}" | This command filters the list of containers to specifically show those that have exited (`status=exited`) and whose names begin with "Task_" (`name=Task_`). The `--format` option customizes the output to display only the container ID and name.           |
| 3    | Remove an Exited Docker Container             | `sudo docker rm <Container_ID>`                                               | This command removes the Docker container identified by the specified `<Container_ID>`. It is generally safe to remove exited containers to free up disk space. **Replace `<Container_ID>` with the actual ID of the container you wish to remove.**                         |

**10. Procedure for Creating Server Containers (Outline)**

The following table provides a high-level outline of the steps involved in creating server-based Docker containers for deployment on the DGX. Consult supplementary documentation or @Ganzo for detailed implementation specifics.

| Step                  | Action                                                      | Command/Details                                                                                                          | Key Considerations and Best Practices                                                                                                                                                                                                                                                        |
|-----------------------|-------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| 1                     | Pull Base Docker Image                                      | `docker pull nvcr.io/pytorch:latest` (Example)                                                                           | Select an appropriate base Docker image from a public registry (e.g., Docker Hub, NVIDIA Container Registry) or a private registry. The example provided pulls the latest PyTorch image. **Carefully choose an image that aligns with your application's requirements. Modify the container if needed.** |
| 2                     | Define Container Configuration (Dockerfile)                   | Define necessary configurations, including exposed ports (e.g., SSH: 22, Jupyter: 8888).                               | Create a `Dockerfile` that outlines the environment for your container. This includes the base image, software dependencies to install, files to copy, user configurations, environment variables, and the commands to execute when the container starts. **Ensure all essential dependencies are installed within the Dockerfile.** |
| 3                     | Build and Test Docker Image                                 | **Build:** `docker build -t <your_image_name> .` <br> **Run:** `docker run -p 8888:8888 -p 6006:6006 -p 22:22 <your_image_name>` | **Build the Docker image:** Navigate to the directory containing your `Dockerfile` and execute the `docker build` command, replacing `<your_image_name>` with a meaningful name for your image. **Run the container:** Use the `docker run` command to start an instance of your image. **Forward necessary ports** (e.g., for Jupyter, TensorBoard, SSH) using the `-p` flag. You may need to **include commands in your Dockerfile or entrypoint script to start services like the Jupyter server.** |
| 4                     | Save Container State as a New Image (Optional)              | `docker commit <container_id> <your_new_image_name>`                                                                      | If you make modifications to a running container that you want to persist, you can "commit" its current state as a new Docker image. Replace `<container_id>` with the ID of the running container and `<your_new_image_name>` with a new name for the saved image.                                  |
| 5                     | Integrate Docker Image into DGX Portal (If Applicable) | Update the relevant database entry with the new image name and set the `isActive` flag to `True`.                             | If a web portal or database system manages the available Docker images for users, you will need to update it with the details of your newly created image and mark it as active to make it available for selection and use. **Consult with system administrators for the specific procedures involved.** |

**11. General Guidelines and Best Practices**

*   **Resource Awareness:** Monitor your resource consumption on the DGX server and ensure efficient utilization of computing resources.
*   **Data Management Protocols:** Adhere to the established laboratory policies for the storage, organization, and backup of your research data.
*   **Software Installation Procedures:** Before installing any new software packages system-wide, consult with system administrators. Consider utilizing virtual environments (e.g., Conda, venv) or Docker containers to manage project-specific software dependencies in an isolated manner.
*   **Security Best Practices:** Maintain strong security hygiene. Always lock your workstation when unattended. Exercise caution when opening emails or clicking on links from unfamiliar sources. Report any suspicious activity to system administrators immediately.
*   **System Maintenance Notifications:** System administrators will manage all necessary software and security updates for the DGX infrastructure. Users will be informed in advance of any scheduled maintenance periods that may impact system availability.
*   **Issue Reporting Protocol:** When encountering any technical difficulties or having questions regarding the DGX system, promptly contact Prof. Moyo or NVIDIA Enterprise Support as appropriate. Provide a detailed description of the issue, including the steps taken to reproduce it, any relevant error messages, and the context in which the problem occurred.

**12. Disclaimer**

The information presented in this document is current as of the revision date and is subject to modifications without prior notification. While diligent efforts have been made to ensure the accuracy of the content, the authors shall not be held liable for any errors, omissions, or consequences arising from the use of this information. Users are strongly encouraged to consult with system administrators for clarification on any critical procedures or for addressing complex technical issues.
